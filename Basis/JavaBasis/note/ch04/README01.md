# 面向对象中

这一章主要涉及面向对象的三大特征，包括封装、继承、多态、（抽象）。

## 封装

程序设计追求“高内聚，低耦合”：

* 高内聚 ：类的内部数据操作细节自己完成，不允许外部干涉；
* 低耦合 ：仅对外暴露少量的方法用于使用。

通俗的说，把该隐藏的隐藏起来，该暴露的暴露出来，这就是封装性的设计思想。

通过将数据声明为私有的（private），再提供公共的（public）方法：getXxx() 和 setXxx() 实现对该属性的操作，以实现下述目的：

* 隐藏一个类中不需要对外提供的实现细节；
* 使用者只能通过事先定制好的方法来访问数据，可以方便地加入控制逻辑，限制对属性的不合理操作；
* 便于修改，增强代码的可维护性。

四种访问权限修饰符：Java 权限修饰符 `private`、 `(缺省)`、`protected`、`public` 置于**类的成员定义**前，用来限定对象对该类成员的访问权限。

| 权限修饰符 | 类内部 | 同一个包 | 不同包的子类 | 同一个工程 |
| :--- | :--- | :--- | :--- | :--- |
| `private` | Yes | | | |
| `(缺省)` | Yes | Yes | | |
| `protected` | Yes | Yes | Yes | |
| `public` | Yes | Yes | Yes | Yes |

**注意**：对于 class 的权限修饰只可以用 `public` 和 `default(缺省)`。

* public 类可以在任意地方被访问；
* default 类只可以被同一个包内部的类访问。

为什么呢？因为外部类和外部类之间访问权限就只有包内和包外。

封装性的体现：

* 类的属性私有化；
* 不对外暴露私有的方法；
* 单例模式的实现。

## 构造器

构造器的特征：

* 它具有与类相同的名称；
* 它不声明返回值类型；
* 不能被 static、final、synchronized、abstract、native 修饰，不能有 return 语句返回值。

构造器的作用：

* 创建对象；
* 给对象进行初始化。

语法格式：

```java
修饰符 类名(参数列表) {
    初始化语句;
}
```

构造器的分类：

* 隐式无参构造器（系统默认提供）；
* 显式定义一个或多个构造器（无参、有参）。

**使用注意**：

* Java 中，每个类都至少有一个构造器；
* 默认构造器的**修饰符**与所属类的修饰符一致；
* 一旦显式定义了构造器，则系统不再提供默认构造器；
* 一个类可以创建多个重载的构造器；
* 父类的构造器不能被子类继承。

例子：

```java
public class ConstructorTest {
    public static void main(String[] args) {
//        StudentA s1 = new StudentA(); // Error
        StudentA s2 = new StudentA("A", 11);
        s2.printInfo();
        StudentA s3 = new StudentA("A", 11, "B");
        s3.printInfo();
        StudentA s4 = new StudentA("A", 11, "B", "C");
        s4.printInfo();
    }
}


class StudentA {
    String name;
    int age;
    String school;
    String major;

    StudentA(String n, int a) {
        name = n;
        age = a;
    }

    StudentA(String n, int a, String s) {
        name = n;
        age = a;
        school = s;
    }

    StudentA(String n, int a, String s, String m) {
        name = n;
        age = a;
        school = s;
        major = m;
    }

    public void printInfo() {
        System.out.println(name + " " + age + " " + school + " " + major);
    }
}
```

## JavaBean

**JavaBean 是一种 Java 语言写成的可重用组件。**

所谓 JavaBean，是指符合如下标准的 Java 类：

* 类是公共的；
* 有一个无参的公共的构造器；
* 有属性，且有对应的 get、set 方法。

## UML 类图

![UML类图](../../resources/UML类图.png)

* `+` 表示 public 类型，`-` 表示 private 类型， `#` 表示 protected 类型;
* 方法的写法：方法的类型（`+`、`-` ）方法名（参数名：参数类型）: 返回值类型。

## this 的使用

* 它的作用和其词义相近：
  * 它在方法内部使用，即这个方法所属对象的引用；
  * 它在构造器内部使用，表示该构造器正在初始化的对象。
* this 可以调用类的属性、方法和构造器；
* 挡在方法内需要调用该方法的对象时，就用 this，具体的，可以用 this 来区分属性和局部变量。

注意：

* 可以在类的构造器中使用 `this(形参列表)` 的方式，调用本类中重载的其他构造器；
* 但是，构造器不能通过 `this(形参列表)` 的方式调用自身构造器；
* 如果一个类中声明了n个构造器，则最多有 n - 1个构造器中使用了 `this(形参列表)`；
* **`this(形参列表)` 必须声明在类的构造器的首行**；
* **在类的一个构造器中，最多只能声明一个 `this(形参列表)`**；

## package、import 的使用

* package 语句作为 Java 源文件的第一条语句，指明该文件中定义的类所在的包，若缺省该语句，则指定为无名包，它的格式为：`package 顶层包名.子包名;`；
* 包对应于文件系统的目录，用 `“.”` 来指明包（目录）的层次；
* 包通常用小写单词标识，通常使用所在公司域名的倒置：`cn.parzulpan.xxx`。

包的作用：

* 包帮助管理大型软件系统，将功能相近的类划分到同一个包中。比如 MVC 的设计模式；
* 包可以包含类和子包，划分项目层次，便于管理；
* 解决类命名冲突的问题，同一个包下类名不能相同；
* 控制访问权限。

## MVC 设计模式

MVC是常用的设计模式之一，将整个程序分为三个层次：**视图模型层**，**控制器层**，与**数据模型层**。这种将程序输入输出、数据处理，以及数据的展示分离开来的设计模式使程序结构变的灵活而且清晰，同时也描述了程序各个对象间的通信方式，降低了程序的耦合性。

* 模型层（Model）：处理数据，
* 视图层（View）：显示数据，
* 控制层（Controller）：处理业务逻辑，

## import

为使用定义在不同包中的 Java 类，需用 import 语句来引入指定包层次下所需要的类或全部类`(.*)`。import 语句告诉编译器到哪里去寻找类。

语法格式：`import 包名. 类名;`

注意：

* 在源文件中使用 import 显式的导入指定包下的类或接口；
* 声明在包的声明和类的声明之间。；
* 如果需要导入多个类或接口，那么就并列显式多个 import 语句即可；
* 举例：可以使用 java.util.* 的方式，一次性导入 util 包下所有的类或接口；
* 如果导入的类或接口是 java.lang 包下的，或者是当前包下的，则可以省略此import语句；
* 如果在代码中使用不同包下的同名的类。那么就需要使用类的全类名的方式指明调用的是哪个类；
* 如果已经导入 java.a 包下的类。那么如果需要使用 a 包的子包下的类的话，仍然需要导入；
* import static 组合的使用：调用指定类或接口下的**静态的属性或方法**。

## 继承

## 练习和总结